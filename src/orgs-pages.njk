---
layout: layouts/base.njk
templateEngineOverride: md, njk
pagination:
    data: orgs.hits.hits
    size: 1
    alias: org
permalink: "orgs/{{ org._source.objectID | slug }}/"
---

<header class="col-span-12 mt-6 xl:mt-12 mb-6">
  <div class="flex justify-between">
    <h1 class="text-3xl md:text-6xl font-serif">
      {% if org._source.policy.supported_policy === true %}Put OA policy into practice at {% else %}Advance OA at {% endif %}
      <br/>
      <strong class="font-bold">{{ org._source.name }}</strong></h1>
    <figure class="block border border-neutral-700 h-36 w-96 p-6 flex"><p class="self-center m-auto">[LOGO WILL BE HERE]</p></figure>
  </div>
</header>

<section class="col-span-12 grid grid-cols-12 gap-6 lg:sticky top-0 py-4 mb-3 md:mb-6 bg-[#F4F0F0] border-b">
  <header class="col-span-12 flex justify-between">
    <h2 class="font-serif text-lg md:text-3xl text-neutral-600 lg:duration-500 js-header_text_toggle">Your OAreport (1 Jan — 31 Dec 2021)</h2>
    <form>
      <label for="csv_download_insights_email" class="sr-only">Email:</label>
      <div class="flex">
        <input class="p-1 md:p-3 border border-r-0 text-xs text-neutral-900 font-semibold" type="email" id="csv_download_insights_email" placeholder="you@example.com">
        <a href="#" class="block p-1 md:p-3 border text-xs text-neutral-600 uppercase font-semibold hover:bg-neutral-600 hover:text-white active:bg-neutral-700 focus:outline-none focus:ring focus:ring-white js-csv_email-button" id="csv_download_insights"><span class='hidden md:inline'>Download </span>CSV</a>
      </div>
    </form>
  </header>
  <article class="col-span-6 lg:col-span-4 mb-3">
    <h3 class="mb-3 uppercase font-semibold text-base lg:duration-500 js-label_text_toggle"><span class="block mb-3 js-icon_toggle">{% icon "file-text" %}</span> articles published</h3>
    <p class="text-4xl md:text-7xl font-light lg:duration-500 js-data_text_toggle" id="js-articles_container">
      <span id="articles">000</span>
    </p>
  </article>

  <article class="col-span-6 lg:col-span-4 mb-3">
    <h3 class="mb-3 uppercase font-semibold text-base lg:duration-500 js-label_text_toggle"><span class="block mb-3 js-icon_toggle">{% icon "unlock" %}</span> open access articles</h3>
    <p class="text-4xl md:text-7xl font-light lg:duration-500 js-data_text_toggle" id="js-articles_oa_container"><span id="percent_oa">00</span><sup class="align-top top-0"> <span class="text-lg text-neutral-500 font-normal">(<span id="articles_oa">000</span>)</span></sup></p>
  </article>

  <article class="col-span-6 lg:col-span-4 mb-3" id="compliance">
    <h3 class="mb-3 uppercase font-semibold text-base lg:duration-500 js-label_text_toggle"><span class="block mb-3 js-icon_toggle">{% icon "check-circle" %}</span> policy-compliant articles</h3>
    <p class="text-4xl md:text-7xl font-light lg:duration-500 js-data_text_toggle" id="js-compliant_container"><span id="percent_compliant">00</span><sup class="align-top top-0"> <span class="text-lg text-neutral-500 font-normal">(<span id="articles_compliant">000</span>)</span></sup></p>
  </article>
</section>

<section class="col-span-12 grid grid-cols-12 gap-6 md:gap-12 mb-6">
  <h2 class="col-span-12 font-serif text-lg md:text-3xl text-neutral-600">Strategies</h2>
  <article class="col-span-12 lg:col-span-4">
    <span class="block mb-3">{% icon "archive" %}</span>
    <h3 class="font-semibold text-xl md:text-3xl mb-2"><span class="block"><span id="can_archive">00</span> articles</span></h3>
    <p class="text-xl md:text-3xl mb-3">that could be self-archived</p>
    <p class="uppercase font-semibold text-chartreuse-700 text-lg mb-8">&uarr; OA up to <span id="can_archive_percent_oa"></span>%</p>
    <form class="mb-6">
      <label for="csv_download_archivable_aam_email" class="sr-only">Email:</label>
      <div class="flex">
        <input class="p-1 md:p-3 border border-r-0 text-xs text-neutral-900 font-semibold" type="email" id="csv_download_archivable_aam_email" placeholder="you@example.com">
        <a href="#" class="block p-1 md:p-3 border text-xs text-neutral-600 uppercase font-semibold hover:bg-neutral-600 hover:text-white active:bg-neutral-700 focus:outline-none focus:ring focus:ring-white js-csv_email-button" id="csv_download_archivable_aam"><span class='hidden md:inline'>Download </span>CSV</a>
      </div>
    </form>
    {# <p class="mb-3 text-sm text-neutral-600">
      <strong>Latest:</strong>
      <a href="" target="_blank" rel="noopener">“<span id="can_archive_latest"></span>”</a>
      in <span id="can_archive_latest_journal"></span>
    </p>
    <p class="text-sm">
      &rarr; <a href="mailto:" class="underline underline-offset-1">Email the corresponding author</a>
    </p> #}
  </article>
  <article class="col-span-12 lg:col-span-8">
    <h4 class="text-lg md:text-2xl mb-6">These <strong>articles’ AAMs</strong> are archivable<br/> &mdash; 10 most recent</h4>
    <ol class="pl-8 list-decimal text-base" id="can_archive_list"></ol>
  </article>

  {# <article class="col-span-6 lg:col-span-4">
    <p class="uppercase font-semibold text-azure-500 text-2xl mb-3"><a href="#">{% icon_small "star" %} <span id="archiving_champs">00</span></a></p>
    <h2 class="text-xl md:text-3xl mb-3"><a href="email/">self-archiving champions</a></h2>
    <p class="mb-3 text-sm text-neutral-600">
      <strong>Top champion:</strong>
      <a href="" target="_blank" rel="noopener"><span id="archiving_champs_top"></span></a>
    </p>
    <p class="text-sm">
      &rarr; <a href="mailto:" class="underline underline-offset-1">Email your top champion</a>
    </p>
  </article> #}
</section>

<script>
// Get the sticky Insights bar & reduce size of text on scroll
// TODO: Optimise this....
window.onscroll = function() {scrollFunction()};

const headerTextToggle = document.querySelector(".js-header_text_toggle"),
      labelTextToggle  = document.querySelectorAll(".js-label_text_toggle"),
      dataTextToggle   = document.querySelectorAll(".js-data_text_toggle"),
      iconToggle       = document.querySelectorAll(".js-icon_toggle svg");

function scrollFunction() {
  if (document.body.scrollTop > 50 || document.documentElement.scrollTop > 50) {
    headerTextToggle.classList.remove("lg:text-3xl");
    headerTextToggle.classList.add("lg:text-xl");

    for (let i = 0; i < dataTextToggle.length; i++) {
      labelTextToggle[i].classList.remove("lg:text-base");
      labelTextToggle[i].classList.add("lg:text-xs");
      dataTextToggle[i].classList.remove("lg:text-7xl");
      dataTextToggle[i].classList.add("lg:text-4xl");
      iconToggle[i].classList.add("lg:h-4");
    }
  } else {
    headerTextToggle.classList.remove("lg:text-xl");
    headerTextToggle.classList.add("lg:text-3xl");

    for (let i = 0; i < dataTextToggle.length; i++) {
      labelTextToggle[i].classList.remove("lg:text-xs");
      labelTextToggle[i].classList.add("lg:text-base");
      dataTextToggle[i].classList.remove("lg:text-4xl");
      dataTextToggle[i].classList.add("lg:text-7xl");
      iconToggle[i].classList.remove("lg:h-4");
    }
  }
}
</script>
