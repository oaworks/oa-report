---
layout: layouts/base.njk
pagination:
    data: orgs.hits.hits
    size: 1
    alias: org
permalink: "{{ org._source.objectID | slug }}/"
---

{%- from "system/component.njk" import component -%}

<header class="mb-3 col-span-12 md:col-span-6">
  <h1 class="mb-6 text-2xl sm:text-3xl md:text-4xl font-light">
    {% if org._source.policy.supported_policy === true %}Put OA policy into practice at {% else %}Advance OA at {% endif %}
    <br>
    <strong class="font-bold">{{ org._source.name }}</strong>
  </h1>

  <h2 class="mb-1 sr-only" id="insights_range">
    Since the start of 2022
  </h2>
  <p class="sr-only">Quick date filters</p>
  <ul>
    <li class="mr-1 inline-block">
      {{ component("pill", {
        id: "last-year",
        txt: "",
        class: "bg-neutral-900"
      }) }}
    </li>
    <li class="mr-1 inline-block">
      {{ component("pill", {
        id: "two-years-ago",
        txt: "",
        class: "bg-neutral-200 text-neutral-900"
      }) }}
    </li>
    <li class="mr-1 inline-block">
      {{ component("pill", {
        id: "all-time",
        txt: "All time",
        class: "bg-neutral-200 text-neutral-900"
      }) }}
    </li>
    <li class="mr-1 inline-block">
      {{ component("pill", {
        id: "start-year",
        txt: "",
        class: "bg-neutral-200 text-neutral-900"
      }) }}
    </li>
  </ul>
</header>

<section class="col-span-12 md:col-span-6 md:text-right">
  {# TODO: uncomment once oaworks/internal-planning#316 is done #}
  {% include 'partials/email-download-form.njk' %}
  {# <br>
  {# TODO: add popover explaining data download form #}
  {# <button class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium text-white bg-neutral-700 hover:bg-neutral-900 popover" data-tippy-content="TEST POPOVER">Download data</button> #}
</section>

<section class="col-span-12 grid grid-cols-12 gap-3 lg:gap-6 top-0 mb-2 pt-2 bg-[#F4F0F0]">
  <div class="col-span-12 grid grid-cols-12 gap-3">
    <header class="col-span-12 md:col-span-6">
      <h2 class="mb-3 text-lg leading-6">
        <span class="block font-medium text-neutral-900 uppercase">
          Insights on <strong class="font-bold">articles</strong>
          {{ component("tooltip", {
            msg: "The <em>Insights</em> section provides a quick overview of your organization’s Open Access statistics. Our data sources are listed on our <a href='https://oa.works/developers/infrastructure/' target='_blank' class='underline'>infrastructure page</a>."
          }) }}
        </span>
      </h2>
    </header>

    {# First row of insights: all defaults #}
    <dl class="col-span-12 sm:mb-3 grid grid-cols-1 gap-3 lg:gap-6 sm:grid-cols-2 lg:grid-cols-3">
      <div class="relative bg-white py-5 px-4 sm:py-6 sm:px-6 drop-shadow-lg md:rounded-lg overflow-hidden">
        <dt>
          <div class="absolute bg-carnation-500 text-white rounded-md p-6">
            {% icon "file-text" %}
          </div>
          <p class="ml-24 mb-2 text-base font-medium text-neutral-500 truncate">
            Total published
            {{ component("tooltip", {
              msg: "The total number of articles published by grantees or authors at your organization."
            }) }}
          </p>
        </dt>
        <dd class="ml-24 flex items-baseline">
          <p class="text-4xl font-semibold text-neutral-900">
            <span id="articles">000</span>
          </p>
        </dd>
      </div>

      <div class="relative bg-white py-5 px-4 sm:py-6 sm:px-6 drop-shadow-lg md:rounded-lg overflow-hidden">
        <dt>
          <div class="absolute bg-carnation-500 text-white rounded-md p-6">
            {% icon "gift" %}
          </div>
          <p class="ml-24 mb-2 text-base font-medium text-neutral-500 truncate">
            Free-to-read
            {{ component("tooltip", {
              msg: "Articles that are free to read on the publisher website or any online repository, including temporarily accessible articles (“bronze Open Access”)."
            }) }}
          </p>
        </dt>
        <dd class="ml-24 flex items-baseline">
          <p class="text-4xl font-semibold text-neutral-900">
            <span id="percent_free">00%</span>
          </p>
          <p class="ml-2 text-sm font-medium text-neutral-600">
            <span id="articles_free">000</span>
          </p>
        </dd>
      </div>

      <div class="relative bg-white py-5 px-4 sm:py-6 sm:px-6 drop-shadow-lg md:rounded-lg overflow-hidden" id="compliance">
        <dt>
          <div class="absolute bg-carnation-500 text-white rounded-md p-6">
            {% icon "check-circle" %}
          </div>
          <p class="ml-24 mb-2 text-base font-medium text-neutral-500 truncate">
            Policy-compliant
            <sup id="compliant_info">{% icon_small "help-circle" %}</sup>
          </p>
        </dt>
        <dd class="ml-24 flex items-baseline">
          <p class="text-4xl font-semibold text-neutral-900">
            <span id="percent_compliant">00%</span>
          </p>
          <p class="ml-2 text-sm font-medium text-neutral-600">
            <span id="articles_compliant">000</span>
          </p>
        </dd>
      </div>
    </dl>

    {# Second row of insights: custom, data-related insights #}
    <dl class="col-span-12 sm:mb-3 grid grid-cols-1 gap-3 lg:gap-6 grid-flow-col auto-cols-fr">
      <div id="open_access">
        <div class="relative bg-white py-5 px-4 sm:py-6 sm:px-6 drop-shadow-lg md:rounded-lg overflow-hidden">
          <dt>
            <div class="absolute bg-carnation-500 text-white rounded-md p-6">
              {% icon "unlock" %}
            </div>
            <p class="ml-24 mb-2 text-base font-medium text-neutral-500 truncate">
              Open Access
              <sup id="open_access_info">{% icon_small "help-circle" %}</sup>
            </p>
          </dt>
          <dd class="ml-24 flex items-baseline">
            <p class="text-4xl font-semibold text-neutral-900">
              <span id="percent_oa">00%</span>
            </p>
            <p class="ml-2 text-sm font-medium text-neutral-600">
              <span id="articles_oa">000</span>
            </p>
          </dd>
        </div>
      </div>

      <div id="data_statement">
        <div class="relative bg-white py-5 px-4 sm:py-6 sm:px-6 drop-shadow-lg md:rounded-lg overflow-hidden">
          <dt>
            <div class="absolute bg-carnation-500 text-white rounded-md p-6">
              {% icon "search" %}
            </div>
            <p class="ml-24 mb-2 text-base font-medium text-neutral-500 truncate">
              Have data availability statements
              <sup id="data_statement_info">{% icon_small "help-circle" %}</sup>
            </p>
          </dt>
          <dd class="ml-24 flex items-baseline">
            <p class="text-4xl font-semibold text-neutral-900">
              <span id="percent_data_statement">00%</span>
            </p>
            <p class="ml-2 text-sm font-medium text-neutral-600">
              <span id="articles_data_statement">000</span>
            </p>
          </dd>
        </div>
      </div>

      <div id="open_data">
        <div class="relative bg-white py-5 px-4 sm:py-6 sm:px-6 drop-shadow-lg md:rounded-lg overflow-hidden">
          <dt>
            <div class="absolute bg-carnation-500 text-white rounded-md p-6">
              {% icon "database" %}
            </div>
            <p class="ml-24 mb-2 text-base font-medium text-neutral-500 truncate">
              With Open Data
              <sup id="open_data_info">{% icon_small "help-circle" %}</sup>
            </p>
          </dt>
          <dd class="ml-24 flex items-baseline">
            <p class="text-4xl font-semibold text-neutral-900">
              <span id="percent_open_data">00%</span>
            </p>
            <p class="ml-2 text-sm font-medium text-neutral-600">
              <span id="articles_open_data">000</span>
            </p>
          </dd>
        </div>
      </div>
    </dl>

    {# TODO: Filter by date #}
    {# <div class="col-span-12 mb-6 grid grid-cols-12 gap-3 lg:gap-6">
      <section>
        <h2 class="sr-only">Filter by date</h2>
        <form onsubmit="changeDateRange()" method="get" id="change_date_range">
          <div class="flex items-end mb-3">
            <fieldset class="mr-6">
              <label for="report-start-date" class="mb-2 block text-base text-neutral-800">From</label>
              <input type="date" min="2021-01-01" name="report-start-date" id="report_start_date" class="focus:ring-carnation-500 focus:border-carnation-500 block w-full sm:text-sm shadow-md rounded-md border-0" required>
            </fieldset>
            <fieldset class="mr-6">
              <label for="report-end-date" class="mb-2 block text-base text-neutral-800">To</label>
              <input type="date" min="2021-01-01" name="report-start-date" id="report_end_date" class="focus:ring-carnation-500 focus:border-carnation-500 block w-full sm:text-sm shadow-md rounded-md border-0" required>
            </fieldset>
            <button type="submit" class="block px-4 py-2 text-sm font-medium rounded-md text-white bg-neutral-900 hover:bg-carnation-500 hover:text-neutral-900 hover:border-carnation-500 focus:outline-none focus:ring-1 focus:ring-carnation-500 focus:border-carnation-500 focus:border-carnation-500 duration-500 shadow-md border-0 h-fit whitespace-nowrap">
              Filter by dates
            </button>
          </div>
        </form>
      </section>
    </div> #}


  </div>
</section>

<section class="col-span-12" id="strategies">
  <h2 class="mb-5 text-lg leading-6 font-medium text-neutral-900 uppercase">
    Strategies
    {{ component("tooltip", {
      msg: "The <em>Strategy</em> section provides actionable steps for making more of your articles Open Access."
    }) }}
  </h2>

  <nav class="block mb-10">
    <div class="sm:hidden">
      <label for="tabs" class="sr-only">Select a tab</label>
      <select name="tabs" class="block w-full pl-3 pr-10 py-2 text-base border-neutral-300 focus:outline-none focus:ring-carnation-500 focus:border-carnation-500 sm:text-sm rounded-md js-strategy-select">
        <option value="canArchiveVOR" selected>Deposit publisher PDFs</option>
        <option value="canArchiveAAM">Deposit accepted manuscripts</option>
        <option value="canEmailStaff">Deposit staff articles</option>
        <option value="hasAPCFollowup">Correct publisher errors</option>
        <option value="hasUnansweredRequests">Escalate unanswered requests</option>
      </select>
    </div>

    <div class="hidden sm:block">
      <div class="border-b border-neutral-200">
        <ul class="-mb-px flex divide-x divide-neutral-300 border-b border-neutral-300 js-tabs" role="tablist" aria-label="Strategies Tabs">
          {{ component("tab-item", {
            id: "can-archive-vor",
            txt: "Deposit publisher PDFs",
            first: true
          }) }}

          {{ component("tab-item", {
            id: "can-archive-aam",
            txt: "Deposit accepted manuscripts",
            first: false
          }) }}

          {{ component("tab-item", {
            id: "can-email-staff",
            txt: "Deposit staff articles",
            first: false
          }) }}

          {{ component("tab-item", {
            id: "has-apc-followup",
            txt: "Correct publisher errors",
            first: false
          }) }}

          {{ component("tab-item", {
            id: "has-unanswered-requests",
            txt: "Escalate unanswered requests",
            first: false
          }) }}
        </ul>
      </div>
    </div>
  </nav>

  <div class="js-tab-content-all">
    {{ component("tab-contents", {
      id: "can-archive-vor",
      heading: "Deposit publisher PDFs",
      desc: "Send emails to authors to request they make their work free to read. In these cases, they can do that by making a <strong>publisher PDF (version of record, VOR)</strong> available in a repository.",
      table_headings: "<th scope='col' class='py-3.5 pl-4 pr-3 text-left text-sm font-semibold w-10/12 sm:w-6/12'>Article</th>\
                       <th scope='col' class='hidden px-3 py-3.5 text-left text-sm font-semibold w-4/12 sm:table-cell'>Corresponding author</th>",
      draft_btn: true,
      action_help_txt: true,
      hidden: false
    }) }}

    {{ component("tab-contents", {
      id: "can-archive-aam",
      heading: "Deposit accepted manuscripts",
      desc: "Send emails to authors to request they make their work free to read. In these cases, they can do that by making an <strong>author accepted manuscript (AAM)</strong> available in a repository.",
      table_headings: "<th scope='col' class='py-3.5 pl-4 pr-3 text-left text-sm font-semibold w-10/12 sm:w-6/12'>Article</th>\
                       <th scope='col' class='hidden px-3 py-3.5 text-left text-sm font-semibold w-4/12 sm:table-cell'>Corresponding author</th>",
      draft_btn: true,
      action_help_txt: true,
      hidden: true
    }) }}

    {{ component("tab-contents", {
      id: "can-email-staff",
      heading: "Deposit staff articles",
      desc: "These paywalled articles have authors who work at your organization. Make them free to read by emailing the corresponding author and asking them to deposit their article into a repository.",
      table_headings: "<th scope='col' class='py-3.5 pl-4 pr-3 text-left text-sm font-semibold w-10/12 sm:w-6/12'>Article</th>\
                       <th scope='col' class='hidden px-3 py-3.5 text-left text-sm font-semibold w-4/12 sm:table-cell'>Corresponding author</th>",
      draft_btn: true,
      action_help_txt: true,
      hidden: true
    }) }}

    {{ component("tab-contents", {
      id: "has-apc-followup",
      heading: "Correct publisher errors",
      desc: "These are articles where an APC has been paid, but the article isn't compliant with the policy. Use this list to follow up with publishers. If an article is made compliant, and the metadata is updated, it will be removed from this list.",
      table_headings: "<th scope='col' class='py-3.5 pl-4 pr-3 text-left text-sm font-semibold w-4/12 sm:w-4/12'>Publisher & journal</th>\
                       <th scope='col' class='py-3.5 pl-4 pr-3 text-left text-sm font-semibold w-3/12 sm:w-4/12'>Article</th>\
                       <th scope='col' class='py-3.5 pl-4 pr-3 text-left text-sm font-semibold w-5/12 sm:w-4/12'>Invoice</th>",
      draft_btn: false,
      action_help_txt: false,
      hidden: true
    }) }}

    {{ component("tab-contents", {
      id: "has-unanswered-requests",
      heading: "Escalate unanswered requests",
      desc: "These articles are not compliant with policy, and their authors haven’t answered multiple requests to comply. Use this list to escalate requests to authors and request they make their work freely available.",
      table_headings: "<th scope='col' class='py-3.5 pl-4 pr-3 text-left text-sm font-semibold w-3/12'>Grant</th>\
                       <th scope='col' class='px-3 py-3.5 text-left text-sm font-semibold w-7/12'>Author & article</th>",
      draft_btn: true,
      action_help_txt: false,
      hidden: true
    }) }}
  </div>
</section>
