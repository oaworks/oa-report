---
layout: layouts/base.njk
pagination:
    data: orgs.hits.hits
    size: 1
    alias: org
permalink: "orgs/{{ org._source.objectID | slug }}/"
---

<header class="col-span-12 mt-6 xl:mt-12 mb-6">
  <div class="flex justify-between">
    <h1 class="text-3xl md:text-6xl font-serif">
      {% if org._source.policy.supported_policy === true %}Put OA policy into practice at {% else %}Advance OA at {% endif %}
      <br/>
      <strong class="font-bold">{{ org._source.name }}</strong></h1>
    <figure class="block border border-neutral-700 h-36 w-96 p-6 flex"><p class="self-center m-auto">[LOGO WILL BE HERE]</p></figure>
  </div>
</header>

<aside class="col-span-12">
  <div class="grid grid-cols-12 gap-6">
    <form class="flex col-span-12 md:col-span-8" action="#">
      <div>
        <label for="report-start-date" class="mb-2 block text-base text-neutral-800">From</label>
        <input type="date" name="report-start-date" id="report-start-date" class="focus:ring-azure-500 focus:border-azure-500 block w-full rounded-none rounded-l-sm sm:text-sm border-neutral-300 br" required>
      </div>
      <div>
        <label for="report-end-date" class="mb-2 block text-base text-neutral-800">To</label>
        <input type="date" name="report-start-date" id="report-end-date" class="-ml-px focus:ring-azure-500 focus:border-azure-500 block w-full rounded-none rounded-l-sm sm:text-sm border-neutral-300" required>
      </div>
      {# <fieldset>
        <h3 class="mb-2 text-base">From</h3>
        <div class="flex">
          <input type="number" step="1" min="1900" max="2022" placeholder="YYYY" class="mr-3 p-1 md:p-2 border text-sm text-neutral-900 font-semibold">
          <input type="number" step="1" min="1" max="12" placeholder="MM" class="mr-3 p-1 md:p-2 border text-sm text-neutral-900 font-semibold">
          <input type="number" step="1" min="1" max="31" placeholder="DD" class="mr-8 p-1 md:p-2 border text-sm text-neutral-900 font-semibold">
        </div>
      </fieldset>
      <fieldset>
        <h3 class="mb-2 text-base">To</h3>
        <div class="flex">
          <input type="number" step="1" min="1900" max="2022" placeholder="YYYY" class="mr-3 p-1 md:p-2 border text-sm text-neutral-900 font-semibold">
          <input type="number" step="1" min="1" max="12" placeholder="MM" class="mr-3 p-1 md:p-2 border text-sm text-neutral-900 font-semibold">
          <input type="number" step="1" min="1" max="31" placeholder="DD" class="p-1 md:p-2 border text-sm text-neutral-900 font-semibold">
        </div>
      </fieldset> #}
    </form>

    {# <form id="csv_download_insights" class="col-span-12 md:col-span-6 text-right" method="get" action="https://beta.oa.works/report/articles.csv?size=all&email=sophy@oa.works&q=%28published%3A%3E2021-01-01%20AND%20published%3A%3C2021-12-31%29%20AND%20%28author_affiliations%3A%2522Bill%20%20Melinda%20Gates%20Foundation%20%28All%29%2522%20OR%20author_affiliations%3A%2522bank%20of%20canada%2522%20OR%20author_affiliations%3A%2522Bill%20and%20Melinda%20Gates%20Foundation%2522%20OR%20author_affiliations%3A%2522Bill%20%20Melinda%20Gates%20Foundation%2522%20OR%20author_affiliations%3A%2522melinda%20gates%20foundation%2522%20OR%20funder_names%3A%2522Bill%20%20Melinda%20Gates%20Foundation%20%28All%29%2522%20OR%20funder_names%3A%2522bank%20of%20canada%2522%20OR%20funder_names%3A%2522Bill%20and%20Melinda%20Gates%20Foundation%2522%20OR%20funder_names%3A%2522Bill%20%20Melinda%20Gates%20Foundation%2522%20OR%20funder_names%3A%2522melinda%20gates%20foundation%2522%29">
      <label for="csv_download_insights_email" class="block mb-2 text-base">Download your insights<sup class="tooltip" title="">{% icon_small "help-circle" %}</sup></label>
      <div class="flex justify-end">
        <input class="p-1 md:p-2 border border-r-0 text-xs text-neutral-900 font-semibold" type="email" id="csv_download_insights_email" placeholder="you@example.com" required>
        <button class="block p-1 md:p-2 border text-xs text-neutral-600 uppercase font-semibold hover:bg-neutral-600 hover:text-white active:bg-neutral-700 focus:outline-none focus:ring focus:ring-white js-csv_email-button"><span class='hidden md:inline'>Download </span>CSV</button>
      </div>
    </form> #}
    <div class="col-span-12 md:col-span-4">
      <label for="email" class="mb-2 block text-base text-neutral-800">Download all data in CSV<sup class="tooltip" title="">{% icon_small "help-circle" %}</sup></label>
      <div class="mt-1 flex rounded-sm shadow-sm">
        <div class="relative flex items-stretch flex-grow focus-within:z-10">
          <div class="absolute inset-y-0 left-0 pl-2 flex items-center pointer-events-none">
            {% icon_small "mail" %}
          </div>
          <input type="email" name="email" id="email" class="focus:ring-azure-500 focus:border-azure-500 block w-full rounded-none rounded-l-sm pl-10 sm:text-sm border-neutral-300 js-csv_email_input" placeholder="you@example.com" required>
        </div>
        <a href="#" class="-ml-px relative inline-flex items-center space-x-2 px-4 py-2 border border-neutral-300 text-sm font-medium rounded-r-sm text-neutral-800 bg-white hover:bg-azure-500 hover:text-white focus:outline-none focus:ring-1 focus:ring-azure-500 focus:border-azure-500 duration-500 js-csv_email_button">
          Download
        </a>
      </div>
    </div>
  </div>
</aside>

<section class="col-span-12 grid grid-cols-12 gap-6 lg:sticky lg:z-10 top-0 pt-4 bg-[#F4F0F0]">
  <div class="col-span-12">
    <h2 class="text-lg leading-6 font-medium text-neutral-900">Insights from 1 Jan — 31 Dec 2021<sup class="tooltip" title="The Insights section provides a quick overview of your organization’s open access statistics. Our data sources are listed on our <a href='https://oa.works/'>infrastructure page</a>.">{% icon_small "help-circle" %}</sup></h2>
    <dl class="mt-5 grid grid-cols-1 rounded-lg bg-white overflow-hidden drop-shadow-lg divide-y divide-white md:grid-cols-3 md:divide-y-0 md:divide-x">
      <div class="px-4 py-5 sm:p-6">
        <dt class="mb-3 text-base font-normal text-neutral-700 lg:duration-500 js-label_text_toggle"><span class="block mb-2 text-carnation-500 js-icon_toggle">{% icon_small "file-text" %}</span> Articles published<sup class="tooltip" title="">{% icon_small "help-circle" %}</sup></dt>
        <dd class="mt-1 flex justify-between items-baseline md:block lg:flex">
          <div class="flex items-baseline text-4xl font-semibold lg:duration-500 js-data_text_toggle" id="js-articles_container">
            <span id="articles">000</span>
          </div>
        </dd>
      </div>

      <div class="px-4 py-5 sm:p-6">
        <dt class="mb-3 text-base font-normal text-neutral-700 lg:duration-500 js-label_text_toggle"><span class="block mb-2 text-carnation-500 js-icon_toggle">{% icon_small "unlock" %}</span> Open Access articles<sup class="tooltip" title="">{% icon_small "help-circle" %}</sup></dt>
        <dd class="mt-1 flex justify-between items-baseline md:block lg:flex">
          <div class="flex items-baseline text-4xl font-semibold lg:duration-500 js-data_text_toggle" id="js-articles_oa_container">
            <span id="percent_oa">00%</span>
            <span class="ml-2 text-sm font-medium text-neutral-500"><span id="articles_oa">000</span></span>
          </div>
        </dd>
      </div>

      <div class="px-4 py-5 sm:p-6" id="compliance">
        <dt class="mb-3 text-base font-normal text-neutral-700 lg:duration-500 js-label_text_toggle"><span class="block mb-2 text-carnation-500 js-icon_toggle">{% icon_small "check-circle" %}</span> Policy-compliant articles<sup class="tooltip" title="">{% icon_small "help-circle" %}</sup></dt>
        <dd class="mt-1 flex justify-between items-baseline md:block lg:flex">
          <div class="flex items-baseline text-4xl font-semibold lg:duration-500 js-data_text_toggle" id="js-compliant_container">
            <span id="percent_compliant">00%</span>
            <span class="ml-2 text-sm font-medium text-neutral-500"><span id="articles_compliant">000</span></span>
          </div>
        </dd>
      </div>
    </dl>
  </div>
  {# <header class="col-span-12 flex justify-between">
    <h2 class="font-serif text-lg md:text-3xl text-neutral-600 lg:duration-500 js-header_text_toggle">
      Insights from 1 Jan — 31 Dec 2021<sup class="tooltip" title="The Insights section provides a quick overview of your organization’s open access statistics. Our data sources are listed on our <a href='https://oa.works/'>infrastructure page</a>.">{% icon_small "help-circle" %}</sup>
    </h2>
  </header>
  <article class="col-span-6 lg:col-span-4 mb-3">
    <h3 class="mb-3 uppercase font-semibold text-base lg:duration-500 js-label_text_toggle"><span class="block mb-3 js-icon_toggle">{% icon "file-text" %}</span> articles published<sup class="tooltip" title="">{% icon_small "help-circle" %}</sup></h3>
    <p class="text-4xl md:text-7xl font-light lg:duration-500 js-data_text_toggle" id="js-articles_container">
      <span id="articles">000</span>
    </p>
  </article>

  <article class="col-span-6 lg:col-span-4 mb-3">
    <h3 class="mb-3 uppercase font-semibold text-base lg:duration-500 js-label_text_toggle"><span class="block mb-3 js-icon_toggle">{% icon "unlock" %}</span> open access articles<sup class="tooltip" title="">{% icon_small "help-circle" %}</sup></h3>
    <p class="text-4xl md:text-7xl font-light lg:duration-500 js-data_text_toggle" id="js-articles_oa_container"><span id="percent_oa">00</span><sup class="align-top top-0"> <span class="text-lg text-neutral-500 font-normal">(<span id="articles_oa">000</span>)</span></sup></p>
  </article>

  <article class="col-span-6 lg:col-span-4 mb-3" id="compliance">
    <h3 class="mb-3 uppercase font-semibold text-base lg:duration-500 js-label_text_toggle"><span class="block mb-3 js-icon_toggle">{% icon "check-circle" %}</span> policy-compliant articles<sup class="tooltip" title="">{% icon_small "help-circle" %}</sup></h3>
    <p class="text-4xl md:text-7xl font-light lg:duration-500 js-data_text_toggle" id="js-compliant_container"><span id="percent_compliant">00</span><sup class="align-top top-0"> <span class="text-lg text-neutral-500 font-normal">(<span id="articles_compliant">000</span>)</span></sup></p>
  </article> #}
</section>

<section class="col-span-12 grid grid-cols-12 gap-6 md:gap-12 mb-6">
  <h2 class="col-span-12 font-medium text-lg text-neutral-900">Strategies<sup class="tooltip" title="">{% icon_small "help-circle" %}</sup></h2>
  <div class="col-span-12 lg:col-span-4">
    <p class="mb-3 text-base font-normal text-neutral-700 lg:duration-500 js-label_text_toggle"><span class="block mb-2 text-carnation-500 js-icon_toggle">{% icon_small "archive" %}</span> Self-archive articles<sup class="tooltip" title="">{% icon_small "help-circle" %}</sup></p>
    <h3 class="font-semibold text-xl md:text-4xl mb-6 md:mb-12"><span class="block">Ask authors to share an Author-Accepted Manuscript</h3>
    <p class="uppercase font-semibold text-neutral-700 text-lg"><span id="can_archive">00</span> closed-access articles<sup class="tooltip" title="">{% icon_small "help-circle" %}</sup></span></p>
    <p class="uppercase text-neutral-700 text-lg mb-8">&uarr; <span class="sr-only">Increase</span> OA% up to <span id="can_archive_percent_oa"></span>%</p>
  </div>
  <div class="col-span-12 lg:col-span-8">
    <div class="-mx-4 mt-8 overflow-hidden sm:-mx-6 md:mx-0 md:rounded-lg">
      <table class="divide-y divide-neutral-300 table-fixed w-full">
        <thead class="bg-neutral-800 text-white">
          <tr>
            <th scope="col" class="py-3.5 pl-4 pr-3 text-left text-sm font-semibold w-5/12">Article</th>
            <th scope="col" class="hidden px-3 py-3.5 text-left text-sm font-semibold w-4/12 sm:table-cell">Author(s)</th>
            <th scope="col" class="hidden px-3 py-3.5 text-left text-sm font-semibold w-2/12 lg:table-cell">Published</th>
            <th scope="col" class="text-sm font-semibold py-3.5 pl-3 pr-4 w-2/12">Open draft<sup class="tooltip" title="">{% icon_small "help-circle" %}</sup></th>
          </tr>
        </thead>
        <tbody class="divide-y divide-neutral-200 bg-white" id="can_archive_list">

        </tbody>
      </table>
    </div>
  </div>
</section>

<script>
// Get the sticky Insights bar & reduce size of text on scroll
// TODO: Optimise this....
window.onscroll = function() {scrollFunction()};

const headerTextToggle = document.querySelector(".js-header_text_toggle"),
      labelTextToggle  = document.querySelectorAll(".js-label_text_toggle"),
      dataTextToggle   = document.querySelectorAll(".js-data_text_toggle"),
      iconToggle       = document.querySelectorAll(".js-icon_toggle svg");

function scrollFunction() {
  if (document.body.scrollTop > 50 || document.documentElement.scrollTop > 50) {
    headerTextToggle.classList.remove("lg:text-3xl");
    headerTextToggle.classList.add("lg:text-xl");

    for (let i = 0; i < dataTextToggle.length; i++) {
      labelTextToggle[i].classList.remove("lg:text-base");
      labelTextToggle[i].classList.add("lg:text-xs");
      dataTextToggle[i].classList.remove("lg:text-7xl");
      dataTextToggle[i].classList.add("lg:text-4xl");
      iconToggle[i].classList.add("lg:h-4");
    }
  } else {
    headerTextToggle.classList.remove("lg:text-xl");
    headerTextToggle.classList.add("lg:text-3xl");

    for (let i = 0; i < dataTextToggle.length; i++) {
      labelTextToggle[i].classList.remove("lg:text-xs");
      labelTextToggle[i].classList.add("lg:text-base");
      dataTextToggle[i].classList.remove("lg:text-4xl");
      dataTextToggle[i].classList.add("lg:text-7xl");
      iconToggle[i].classList.remove("lg:h-4");
    }
  }
}
</script>
